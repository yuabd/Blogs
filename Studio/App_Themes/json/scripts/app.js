var editor=null;var formatter=null;var app={};app.formatterToEditor=function(){try{editor.set(formatter.get());}catch(err){app.notify.showError(err);}};app.editorToFormatter=function(){try{formatter.set(editor.get());}catch(err){app.notify.showError(err);}};app.load=function(){try{app.notify=new Notify();var json={"name":"Json","url":"http://www.henhaoji.com.cn/json.html","page":88,"isNonProfit":true,"address":{"street":"北纬一路.","city":"浙江温州","country":"中国"},"links":[{"name":"Google","url":"http://www.google.com"},{"name":"Baidu","url":"http://www.baidu.com"},{"name":"gys","url":"http://www.guyushi.com"}]};app.lastChanged=undefined;var container=document.getElementById("jsonformatter");formatter=new JSONFormatter(container,{change:function(){app.lastChanged=formatter;}});formatter.set(json);formatter.onError=function(err){app.notify.showError(err);};container=document.getElementById("jsoneditor");editor=new JSONEditor(container,{change:function(){app.lastChanged=editor;}});editor.set(json);var domSplitter=document.getElementById('splitter');app.splitter=new Splitter({container:domSplitter,change:function(){app.resize();}});domSplitter.appendChild(document.createElement('br'));domSplitter.appendChild(document.createElement('br'));domSplitter.appendChild(document.createElement('br'));var toForm=document.createElement('button');toForm.id='toForm';toForm.title='解析JSON';toForm.className='convert';toForm.innerHTML='<div class="convert-right"></div>';toForm.onclick=function(){this.focus();app.formatterToEditor();};domSplitter.appendChild(toForm);domSplitter.appendChild(document.createElement('br'));domSplitter.appendChild(document.createElement('br'));var toJSON=document.createElement('button');toJSON.id='toJSON';toJSON.title='保存JSON';toJSON.className='convert';toJSON.innerHTML='<div class="convert-left"></div>';toJSON.onclick=function(){this.focus();app.editorToFormatter();};domSplitter.appendChild(toJSON);JSONEditor.Events.addEventListener(window,'resize',app.resize);document.body.spellcheck=false;}catch(err){app.notify.showError(err);}};app.openCallback=function(err,data){if(!err){if(data!=undefined){formatter.setText(data);try{var json=JSONEditor.parse(data);editor.set(json);}catch(err){editor.set({});app.notify.showError(err);}}}else{app.notify.showError(err);}};app.resize=function(){var domEditor=document.getElementById('jsoneditor');var domFormatter=document.getElementById('jsonformatter');var domSplitter=document.getElementById('splitter');var width=$("#content-wrapper").width();var height=$("#content-wrapper").height();var splitterWidth=domSplitter.clientWidth;var splitterLeft=width*app.splitter.getValue();domFormatter.style.width='48%'
domEditor.style.left=Math.round(splitterLeft+ splitterWidth)+'px';domEditor.style.width='48%'
$("#jsonformatter").height(height);};